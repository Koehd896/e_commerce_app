<% if @filter %>
<div class="dropdown" id="filter">
  <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Select Filter <span class="caret"></span>
  </button>
  <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
    <form class="dropdown-item" method="post" action="/search/<%= @products.map {|p| p.id}.join(",") %>/price_low_to_high">
      <input type="submit" value="Price: Low to High">
    </form>
    <form class="dropdown-item" method="post" action="/search/<%= @products.map {|p| p.id}.join(",") %>/price_high_to_low">
      <input type="submit" value="Price: High to Low">
    </form>
  </div>
</div>
<% end %>

<div class="flex-container">
<% @products.each do |product| %>
  <div class="card flex-item">
    <div class="card-body">
      <ul class="list-group list-group-flush">
        <li class="list-group-item"><h5 class="card-title"><%= product.name %></h5></li>
        <% if product.image %>  
          <li class="list-group-item"><img src="<%= product.image %>" alt="product_image" width="100" height="100"></li>
        <% end %>
        <li class="list-group-item">Price: $<%= product.price %></li>
        <li class="list-group-item">Description:<br><%= product.description %></li>
        <% if logged_in? %>
          <form method="post" action="/users/<%= current_user.id %>/cart">
            <input type="hidden" id="hidden" name="_method" value="PATCH">
            <input type="hidden" name="add_product_id" value="<%= product.id %>">
            <input type="submit" value="Add To Cart" class="btn btn-primary" id="cart-button">
          </form>
        <% end %>
      </ul>

    </div>
  </div>
<% end %>
</div>